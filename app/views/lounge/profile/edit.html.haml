= stylesheet_link_tag 'lounge', 'lounge/profile'
= render 'lounge/shared/messages'
- if @user.errors
  - @user.errors.full_messages.each do |error|
    %p{style: 'font-size: 15px'}= error
- if @user.user_profile.errors
  .span6
    %ul.error-list
      - @user.user_profile.errors.full_messages.each do |error|
        %li.error= error
= simple_form_for @user, url: lounge_profile_path, html: {class: 'form-horizontal'} do |f|
  .row
    .span11
      %h4.big-shadow Edit Account & Profile Details
      .progress.progress-warning.progress-striped
        .bar{style: "width: #{current_user.user_profile.percent_complete}%"}
  .row
    .span11.header
      %i{class: 'icon-user'}
      %span.title Account Details
    = f.simple_fields_for :user_profile do |up|
      .row
        .span5
          = f.input :nickname, input_html: {class: 'input-large'}
          = up.input :first_name, input_html: {class: 'input-large'}
          = up.input :address_city, input_html: {class: 'input-large'}
          = up.input :address_zip, input_html: {class: 'input-large'}
          = f.input :password
        .span5
          = f.input :email, input_html: {class: 'input-large'}
          = up.input :last_name, input_html: {class: 'input-large'}
          = up.input :address_state, input_html: {class: 'input-large'}
          = up.input :address_country, as: :select, collection: Carmen::Country.all.map {|c| [c.name, c.code]}
          = f.input :password_confirmation
          = up.input :timezone, collection: ActiveSupport::TimeZone::MAPPING, prompt: 'Choose Timezone',
            include_blank: true
  .row
    .span11.header
      %i{class: 'icon-edit'}
      %span.title Profile & Search Details
    = f.simple_fields_for :user_profile do |up|
      .row
        .span5
          = up.input :gender, collection: UserProfile::GENDERS, prompt: 'Choose Gender'
          = up.input :min_age
          = up.input :selected_birthday, as: :datepicker, input_html: {value: (@user.user_profile.birthday.present? ? l(@user.user_profile.birthday) : ''), class: 'input-medium'}
          = up.input :birthday, as: :hidden
          = up.input :ethnicity, collection: UserProfile::ETHNICITY, prompt: 'Choose Ethnicity', include_blank: true
          = up.input :education, collection: UserProfile::EDUCATION, prompt: 'Choose Education', include_blank: true
        .span5
          = up.input :seeking, collection: UserProfile::GENDERS, prompt: 'Choose Gender'
          = up.input :max_age
          = up.input :occupation
          = up.input :religion, collection: UserProfile::RELIGIONS, prompt: 'Choose Religion', include_blank: true
          = up.input :search_radius
    .row
      .span10
        = f.simple_fields_for :user_profile do |up|
          = up.input :biography, as: 'text',input_html: {class: 'span8', rows: '6'}
        = f.simple_fields_for :user_profile do |up|
          = up.input :likes, input_html: {class: 'chzn-select span7', multiple: true}, collection: UserProfile::LIKES
    .row{style: 'padding-bottom: 10px'}
      .span6
        = f.button :submit, class: 'btn btn-warning pull-right', value: 'Save Profile'
= form_for [:lounge, @user, Photo.new], html: {id: 'profile_upload'} do |p|
  .row
    .span11.header
      %i{class: 'icon-picture'}
      %span.title Images
    .row{style: 'margin-top: -20px'}
      .span10{style: 'margin-left: 60px'}
        #photos
          %ul.thumbnails
            = render @user.photos
        %span.btn.btn-success.fileinput-button.btn-medium
          %i.icon-plus.icon-white
          %span Add Profile Photos
          %input{type: 'file', name: 'photos[photo_file]', multiple: 'multiple'}
%script{id: 'template-upload', type: 'text/x-tmpl'}
  .upload
    {%=o.name%}
    .progress
      .bar{style: 'width: 0%'}